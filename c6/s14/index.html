
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="通过python解决算法和数据结构问题">
      
      
      
      
        <link rel="prev" href="../s13/">
      
      
        <link rel="next" href="../s15/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>6.14. 搜索树实现 - python数据结构和算法 - 中文版</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#614-搜索树实现" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
你当前浏览的版本已不是最新版本，
<a href="../../..">
    <strong>点击这里</strong>
</a>查看最新版本的文档

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="python数据结构和算法 - 中文版" class="md-header__button md-logo" aria-label="python数据结构和算法 - 中文版" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            python数据结构和算法 - 中文版
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              6.14. 搜索树实现
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/pythonds-zh-cn/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    python数据结构和算法 - 中文版
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c1/" class="md-tabs__link">
          
  
    
  
  1. 引言

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c2/" class="md-tabs__link">
          
  
    
  
  2. 算法分析

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c3/" class="md-tabs__link">
          
  
    
  
  3. 基本数据结构

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c4/" class="md-tabs__link">
          
  
    
  
  4. 递归

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c5/" class="md-tabs__link">
          
  
    
  
  5. 搜索与排序

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  6. 树和树算法

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c7/" class="md-tabs__link">
          
  
    
  
  7. 图和图算法

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c8/" class="md-tabs__link">
          
  
    
  
  8. 高级主题

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="python数据结构和算法 - 中文版" class="md-nav__button md-logo" aria-label="python数据结构和算法 - 中文版" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    python数据结构和算法 - 中文版
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/pythonds-zh-cn/" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    python数据结构和算法 - 中文版
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c1/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1. 引言
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            1. 引言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2. 入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3. 什么是计算机科学？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.4. 什么是编程？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.5. 为什么学习数据结构和抽象数据类型？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.6. 为什么学习算法？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.7. Python基础回顾
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.8. 数据入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.9. 输入和输出
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.10. 控制结构
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.11. 异常处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.12. 定义函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.13. Python中的面向对象编程：定义类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.14. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.15. 关键术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.16. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    2. 算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            2. 算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2. 什么是算法分析？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3. 大O表示法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.4. 一个字谜检测例子
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.5. Python数据结构的性能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.6. 列表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.7. 字典
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.8. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.9. 关键术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.10. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c3/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    3. 基本数据结构
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            3. 基本数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2. 什么是线性结构？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3. 栈
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4. 栈的抽象数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5. 用Python实现栈
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.6. 简单的括号匹配
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.7. 符号匹配（一般情况）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.8. 将十进制数转换为二进制数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.9. 中缀、前缀和后缀表达式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.10. 队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.11. 队列的抽象数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.12. 用Python实现队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.13. 队列模拟：烫手山芋游戏
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.14. 队列模拟：打印任务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.15. 双端队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.16. 双端队列的抽象数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.17. 用Python实现双端队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.18. 回文检测器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.19. 列表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.20. 无序列表的抽象数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.21. 用链表实现无序列表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.22. 有序列表的抽象数据类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s23/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.23. 实现有序列表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s24/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.24. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s25/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.25. 关键词术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s26/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.26. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c4/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    4. 递归
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            4. 递归
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2. 什么是递归？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3. 计算一个数列的和
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4. 递归的三条法则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.5. 将整数转换为任意进制的字符串
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.6. 栈帧：实现递归
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.7. 递归的可视化
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.8. 谢尔宾斯基三角形
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.9. 复杂的递归问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.10. 汉诺塔问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.11. 迷宫探索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.12. 动态规划
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.13. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.14. 关键术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c4/s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.15. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c5/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    5. 搜索与排序
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            5. 搜索与排序
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.2. 搜索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.3. 顺序搜索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.4. 二分搜索
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.5. 哈希
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.6. 排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.7. 冒泡排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.8. 选择排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.9. 插入排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.10. 希尔排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.11. 归并排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.12. 快速排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.13. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.14. 关键术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.15. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    6. 树和树算法
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            6. 树和树算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1. 目标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2. 树的示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.3. 词汇和定义
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.4. 实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.5. 列表表示法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.6. 节点与引用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.7. 解析树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.8. 树遍历
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.9. 使用二叉堆的优先队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.10. 二叉堆操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.11. 二叉堆实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.12. 二叉搜索树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.13. 搜索树操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    6.14. 搜索树实现
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.15. 搜索树分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.16. 平衡二叉搜索树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.17. AVL树性能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.18. AVL树实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.19. Map ADT实现总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.20. 总结
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.21. 关键术语
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../s22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.22. 练习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c7/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    7. 图和图算法
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            7. 图和图算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S6
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S7
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S9
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S10
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S11
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S12
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S13
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S14
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S15
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S16
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S17
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S18
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S19
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S20
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S21
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S22
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s23/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S23
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s24/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S24
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s25/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S25
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c8/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    8. 高级主题
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            8. 高级主题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    S6
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="614-搜索树实现">6.14. 搜索树实现<a class="headerlink" href="#614-搜索树实现" title="Permanent link">&para;</a></h1>
<p><strong>6.14. Search Tree Implementation</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>A binary search tree (BST) relies on the property that keys that are less than the parent are found in the left subtree, and keys that are greater than the parent are found in the right subtree. We will call this the <strong>BST property</strong>. As we implement the <code>Map</code> interface as described above, the BST property will guide our implementation. <code>Figure 1</code> illustrates this property of a binary search tree, showing the keys without any associated values. Notice that the property holds for each parent and child. All of the keys in the left subtree are less than the key in the root. All of the keys in the right subtree are greater than the root.</p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/simpleBST.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/simpleBST.png" /></a>
    <figcaption markdown="span">Figure 1: A Simple Binary Search Tree</figcaption>
</figure>  </p>
<p>Now that you know what a binary search tree is, we will look at how a binary search tree is constructed. The search tree in <code>Figure 1</code> represents the nodes that exist after we have inserted the following keys in the order shown: <span class="arithmatex">\(70, 31, 93, 94, 14, 23, 73\)</span>. Since 70 was the first key inserted into the tree, it is the root. Next, 31 is less than 70, so it becomes the left child of 70. Next, 93 is greater than 70, so it becomes the right child of 70. Now we have two levels of the tree filled, so the next key is going to be the left or right child of either 31 or 93. Since 94 is greater than 70 and 93, it becomes the right child of 93. Similarly 14 is less than 70 and 31, so it becomes the left child of 31. 23 is also less than 31, so it must be in the left subtree of 31. However, it is greater than 14, so it becomes the right child of 14.</p>
<p>To implement the binary search tree, we will use the nodes and references approach similar to the one we used to implement the linked list and the expression tree. However, because we must be able create and work with a binary search tree that is empty, our implementation will use two classes. The first class we will call <code>BinarySearchTree</code>, and the second class we will call <code>TreeNode</code>. The <code>BinarySearchTree</code> class has a reference to the <code>TreeNode</code> that is the root of the binary search tree. In most cases the external methods defined in the outer class simply check to see if the tree is empty. If there are nodes in the tree, the request is just passed on to a private method defined in the <code>BinarySearchTree</code> class that takes the root as a parameter. In the case where the tree is empty or we want to delete the key at the root of the tree, we must take special action. The code for the <code>BinarySearchTree</code> class constructor along with a few other miscellaneous methods is shown in <code>Listing 1</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 1</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BinarySearchTree</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #666666">0</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__len__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span><span style="color: #0000FF">__iter__</span>()
</code></pre></div>
<p>The <code>TreeNode</code> class provides many helper methods that make the work done in the <code>BinarySearchTree</code> class methods much easier. The constructor for a <code>TreeNode</code>, along with these helper methods, is shown in <code>Listing 2</code>. As you can see in the listing many of these helper methods help to classify a node according to its own position as a child (left or right) and the kind of children the node has. The <code>TreeNode</code> class will also explicitly keep track of the parent as an attribute of each node. You will see why this is important when we discuss the implementation for the <code>del</code> operator.</p>
<p>Another interesting aspect of the implementation of <code>TreeNode</code> in <code>Listing 2</code> is that we use Python’s optional parameters. Optional parameters make it easy for us to create a <code>TreeNode</code> under several different circumstances. Sometimes we will want to construct a new <code>TreeNode</code> that already has both a parent and a child (e.g. left) and in that case we can pass <code>parent</code> and <code>left_child</code> as parameters. At other times we will just create a <code>TreeNode</code> with the key-value pair, and we will not pass any parameters for <code>parent</code> or <code>child</code>. In this case, the default values of the optional parameters are used.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 2</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">TreeNode</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, key, value, left<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, right<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, parent<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #666666">=</span> parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_left_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_right_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_root</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_leaf</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_any_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_children</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_value</span>(<span style="color: #008000">self</span>, key, value, left, right):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
</code></pre></div>
<p>Now that we have the <code>BinarySearchTree</code> shell and the <code>TreeNode</code>, it is time to write the <code>put</code> method that will allow us to build our binary search tree. The <code>put</code> method is a method of the <code>BinarySearchTree</code> class. This method will check to see if the tree already has a root. If there is not a root, then <code>put</code> will create a new <code>TreeNode</code> and install it as the root of the tree. If a root node is already in place, then <code>put</code> calls the private recursive helper method <code>_put</code> to search the tree according to the following algorithm:</p>
<ul>
<li>Starting at the root of the tree, search the binary tree comparing the new key to the key in the current node. If the new key is less than the current node, search the left subtree. If the new key is greater than the current node, search the right subtree.</li>
<li>When there is no left or right child to search, we have found the position in the tree where the new node should be installed.</li>
<li>To add a node to the tree, create a new <code>TreeNode</code> object and insert the object at the point discovered in the previous step.</li>
</ul>
<p><code>Listing 3</code> shows the Python code for inserting a new node in the tree. The <code>_put</code> method is written recursively following the steps outlined above. Notice that when a new child is inserted into the tree, the <code>current_node</code> is passed to the new tree as the parent.</p>
<p>One important problem with our implementation of insertion is that duplicate keys are not handled properly. As our tree is implemented, a duplicate key will create a new node with the same key value in the right subtree of the node having the original key. The result of this is that the node with the new key will never be found during a search. A better way to handle the insertion of a duplicate key is for the value associated with the new key to replace the old value. We leave fixing this bug as an exercise for you.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 3</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">put</span>(<span style="color: #008000">self</span>, key, value):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> TreeNode(key, value)
    <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">+</span> <span style="color: #666666">1</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_put</span>(<span style="color: #008000">self</span>, key, value, current_node):
    <span style="color: #008000; font-weight: bold">if</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>left_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> TreeNode(key, value, parent<span style="color: #666666">=</span>current_node)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>right_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> TreeNode(key, value, parent<span style="color: #666666">=</span>current_node)
</code></pre></div>
<p>With the <code>put</code> method defined, we can easily overload the <code>[]</code> operator for assignment by having the <code>__setitem__</code> method call the <code>put</code> method (see <code>Listing 4</code>). This allows us to write Python statements like <code>my_zip_tree['Plymouth'] = 55446</code>, just like a Python dictionary.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 4</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__setitem__</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>put(key, value)
</code></pre></div>
<p><code>Figure 2</code> illustrates the process for inserting a new node into a binary search tree. The lightly shaded nodes indicate the nodes that were visited during the insertion process.</p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstput.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstput.png" /></a>
    <figcaption markdown="span">Figure 2: Inserting a Node with Key = 19</figcaption>
</figure>  </p>
<div class="admonition info">
<p class="admonition-title">Self Check</p>
<p>Which of the trees shows a correct binary search tree given that the keys were inserted in the following order 5, 30, 2, 40, 25, 4.</p>
<ul>
<li>answer_a: <a class="glightbox" href="../imgs/bintree_a.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_a.png"></a></li>
<li>answer_b: <a class="glightbox" href="../imgs/bintree_b.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_b.png"></a></li>
<li>answer_c: <a class="glightbox" href="../imgs/bintree_c.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_c.png"></a></li>
</ul>
<p>correct: b</p>
<ul>
<li>feedback a: Remember, starting at the root keys less than the root must be in the left subtree, while keys greater than the root go in the right subtree.</li>
<li>feedback b: good job.</li>
<li>feedback c: This looks like a binary tree that satisfies the full tree property needed for a heap.</li>
</ul>
</div>
<p>Once the tree is constructed, the next task is to implement the retrieval of a value for a given key. The <code>get</code> method is even easier than the <code>put</code> method because it simply searches the tree recursively until it gets to a non-matching leaf node or finds a matching key. When a matching key is found, the value stored in the payload of the node is returned.</p>
<p><code>Listing 5</code> shows the code for <code>get</code> and <code>_get</code>. The search code in the <code>_get</code> method uses the same logic for choosing the left or right child as the <code>_put</code> method. Notice that the <code>_get</code> method returns a <code>TreeNode</code> to <code>get</code>, this allows <code>_get</code> to be used as a flexible helper method for other <code>BinarySearchTree</code> methods that may need to make use of other data from the <code>TreeNode</code> besides the payload.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 5</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
        result <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">if</span> result:
            <span style="color: #008000; font-weight: bold">return</span> result<span style="color: #666666">.</span>value
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_get</span>(<span style="color: #008000">self</span>, key, current_node):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> current_node:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
        <span style="color: #008000; font-weight: bold">return</span> current_node
    <span style="color: #008000; font-weight: bold">elif</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>left_child)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>right_child)
</code></pre></div>
<p>By implementing the <code>__getitem__</code> method we can write a Python statement that looks just like we are accessing a dictionary, when in fact we are using a binary search tree, for example <code>z = my_zip_tree["Fargo"]</code>.  As you can see in <code>Listing 6</code>, all the <code>__getitem__</code> method does is call <code>get</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 6</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__getitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get(key)
</code></pre></div>
<p>Using <code>get</code>, we can implement the <code>in</code> operation by writing a <code>__contains__</code> method for the <code>BinarySearchTree</code>. The <code>__contains__</code> method will simply call <code>get</code> and return <code>True</code> if <code>get</code> returns a value, or <code>False</code> if it returns <code>None</code>. The code for <code>__contains__</code> is shown in <code>Listing 7</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 7</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__contains__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">bool</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root))
</code></pre></div>
<p>Recall that <code>__contains__</code> overloads the <code>in</code> operator and allows us to write statements such as <code>"Northfield" in my_zip_tree</code>.</p>
<p>Finally, we turn our attention to the most challenging operation on the binary search tree, the deletion of a key (see <code>Listing 8</code>). The first task is to find the node to delete by searching the tree. If the tree has more than one node we search using the <code>_get</code> method to find the <code>TreeNode</code> that needs to be removed. If the tree only has a single node, that means we are removing the root of the tree, but we still must check to make sure the key of the root matches the key that is to be deleted. In either case if the key is not found the <code>del</code> operator raises an error.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 8</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">&gt;</span> <span style="color: #666666">1</span>:
        node_to_remove <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">if</span> node_to_remove:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_delete(node_to_remove)
            <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">==</span> <span style="color: #666666">1</span> <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
</code></pre></div>
<p>Once we’ve found the node containing the key we want to delete, there are three cases that we must consider:</p>
<ol>
<li>The node to be deleted has no children (see <code>Figure 3</code>).</li>
<li>The node to be deleted has only one child (see <code>Figure 4</code>).</li>
<li>The node to be deleted has two children (see <code>Figure 5</code>).</li>
</ol>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel1.png" /></a>
    <figcaption markdown="span">Figure 3: Deleting Node 16, a Node without Children</figcaption>
</figure>  </p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel2.png" /></a>
    <figcaption markdown="span">Figure 4: Deleting Node 25, a Node That Has a Single Child</figcaption>
</figure>  </p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel3.png" /></a>
    <figcaption markdown="span">Figure 5: Deleting Node 5, a Node with Two Children</figcaption>
</figure>  </p>
<p>The first case is straightforward. If the current node has no children, all we need to do is delete the node and remove the reference to this node in the parent. The code for this case is shown in <code>Listing 9</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 9</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_leaf():
    <span style="color: #008000; font-weight: bold">if</span> current_node <span style="color: #666666">==</span> current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child:
        current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
</code></pre></div>
<p>The second case is only slightly more complicated. If a node has only a single child, then we can simply promote the child to take the place of its parent. The code for this case is shown in <code>Listing 10</code>. As you look at this code, you will see that there are six cases to consider. Since the cases are symmetric with respect to either having a left or right child, we will just discuss the case where the current node has a left child. The decision proceeds as follows:</p>
<ol>
<li>If the current node is a left child, then we only need to update the parent reference of the left child to point to the parent of the current node, and then update the left child reference of the parent to point to the current node’s left child.</li>
<li>
<p>If the current node is a right child, then we only need to update the parent reference of the left child to point to the parent of the current node, and then update the right child reference of the parent to point to the current node’s left child.</p>
</li>
<li>
<p>If the current node has no parent, it must be the root. In this case we will just replace the <code>key</code>, <code>value</code>, <code>left_child</code>, and <code>right_child</code> data by calling the <code>replace_value</code> method on the root</p>
</li>
</ol>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 10</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">else</span>:  <span style="color: #3D7B7B; font-style: italic"># removing a node with one child</span>
    <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>get_left_child():
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
            current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
            current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>replace_value(
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>key,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>value,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>left_child,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>right_child,
            )
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
            current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
            current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>replace_value(
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>key,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>value,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>left_child,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>right_child,
            )
</code></pre></div>
<p>The third case is the most difficult case to handle. If a node has two children, then it is unlikely that we can simply promote one of them to take the node’s place. We can, however, search the tree for a node that can be used to replace the one scheduled for deletion. What we need is a node that will preserve the binary search tree relationships for both of the existing left and right subtrees. The node that will do this is the node that has the next-largest key in the tree. We call this node the <strong>successor</strong>, and we will look at a way to find the successor shortly. The successor is guaranteed to have no more than one child, so we know how to remove it using the two cases for deletion that we have already implemented. Once the successor has been removed, we simply put it in the tree in place of the node to be deleted. The code  to handle the third case is shown in <code>Listing 11</code>.</p>
<p>In <code>Listing 11</code> we make use of the helper methods <code>find_successor</code> and <code>splice_out</code> to find and remove the successor. The reason we use <code>splice_out</code> is that it goes directly to the node we want to splice out and makes the right changes. We could call <code>delete</code> recursively, but then we would waste time searching again for the key node.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 11</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>has_children():  <span style="color: #3D7B7B; font-style: italic"># removing a node with two children</span>
    successor <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>find_successor()
    successor<span style="color: #666666">.</span>splice_out()
    current_node<span style="color: #666666">.</span>key <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>key
    current_node<span style="color: #666666">.</span>value <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>value
</code></pre></div>
<p>The code to find the successor is shown below (see <code>Listing 12</code>) and as you can see is a method of the <code>TreeNode</code> class. This code makes use of the same properties of binary search trees that cause an inorder traversal to print out the nodes in the tree from smallest to largest. There are three cases to consider when looking for the successor:</p>
<ol>
<li>If the node has a right child, then the successor is the smallest key in the right subtree.</li>
<li>If the node has no right child and is the left child of its parent, then the parent is the successor.</li>
<li>If the node is the right child of its parent, and itself has no right child, then the successor to this node is the successor of its parent, excluding this node.</li>
</ol>
<p>The first condition is the only one that matters for us when deleting a node from a binary search tree. However, the <code>find_successor</code> method has other uses that we will explore in the exercises at the end of this chapter.</p>
<p>The <code>find_min</code> method is called to find the minimum key in a subtree. You should convince yourself that the minimum value key in any binary search tree is the leftmost child of the tree. Therefore the <code>find_min</code> method simply follows the <code>left_child</code> references in each node of the subtree until it reaches a node that does not have a left child.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 12</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_successor</span>(<span style="color: #008000">self</span>):
    successor <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
        successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>find_min()
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
                successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>find_successor()
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span>
    <span style="color: #008000; font-weight: bold">return</span> successor

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_min</span>(<span style="color: #008000">self</span>):
    current <span style="color: #666666">=</span> <span style="color: #008000">self</span>
    <span style="color: #008000; font-weight: bold">while</span> current<span style="color: #666666">.</span>left_child:
        current <span style="color: #666666">=</span> current<span style="color: #666666">.</span>left_child
    <span style="color: #008000; font-weight: bold">return</span> current

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">splice_out</span>(<span style="color: #008000">self</span>):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_leaf():
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
            <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_any_child():
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
</code></pre></div>
<p>We can implement the <code>del</code> operator by writing a <code>__delete__</code> method for the <code>BinarySearchTree</code> as shown in <code>Listing 13</code>. It is a wrapper method that allows us to remove a key from the map by writing <code>del my_zip_tree["NYC"]</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 13</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__delitem__</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000">self</span><span style="color: #666666">.</span>delete(key)
</code></pre></div>
<p>We need to look at one last interface method for the binary search tree. Suppose that we would like to simply iterate over all the keys in the tree in order. This is definitely something we have done with dictionaries, so why not trees? You already know how to traverse a binary tree in order, using the <code>inorder</code> traversal algorithm. However, writing an iterator requires a bit more work since an iterator should return only one node each time the iterator is called.</p>
<p>Python provides us with a very powerful function to use when creating an iterator. The function is called <code>yield</code>. <code>yield</code> is similar to <code>return</code> in that it returns a value to the caller. However, <code>yield</code> also takes the additional step of freezing the state of the function so that the next time the function is called it continues executing from the exact point it left off earlier. Functions that create objects that can be iterated are called <em>generator functions</em>.</p>
<p>The code for an <code>inorder</code> iterator of a binary tree is shown in the next listing. Look at this code carefully; at first glance you might think that the code is not recursive. However, remember that <code>__iter__</code> overrides the <code>for ... in</code> operation for iteration, so it really is recursive! Because it is recursive over <code>TreeNode</code> instances, the <code>__iter__</code> method is defined in the <code>TreeNode</code> class.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">yield</span> elem
        <span style="color: #008000; font-weight: bold">yield</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>key
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                <span style="color: #008000; font-weight: bold">yield</span> elem
</code></pre></div>
<p>At this point you may want to download the entire file containing the full version of the <code>BinarySearchTree</code> and <code>TreeNode</code> classes.</p>
<div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Activity: 6.14.2 ActiveCode</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 60</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 61</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 62</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 63</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 64</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 65</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 66</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 67</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 68</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 69</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 70</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 71</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 82</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 83</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 84</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 85</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 86</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 87</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 88</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 89</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 90</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 91</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 92</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 93</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 94</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 95</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 96</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 97</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 98</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 99</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">100</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">101</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">102</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">103</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">104</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">105</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">106</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">107</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">108</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">109</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">110</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">111</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">112</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">113</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">114</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">115</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">116</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">117</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">118</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">119</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">120</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">121</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">122</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">123</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">124</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">125</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">126</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">127</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">128</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">129</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">130</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">131</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">132</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">133</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">134</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">135</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">136</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">137</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">138</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">139</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">140</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">141</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">142</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">143</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">144</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">145</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">146</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">147</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">148</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">149</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">150</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">151</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">152</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">153</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">154</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">155</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">156</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">157</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">158</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">159</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">160</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">161</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">162</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">163</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">164</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">165</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">166</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">167</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">168</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">169</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">170</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">171</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">172</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">173</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">174</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">175</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">176</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">177</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">178</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">179</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">180</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">181</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">182</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">183</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">184</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">185</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">186</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">187</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">188</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">189</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">190</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">191</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">192</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">193</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">194</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">195</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">196</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">197</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">198</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">199</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">200</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">201</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">202</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">203</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">204</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">205</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">206</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">207</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">208</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">209</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">210</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">211</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">212</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">213</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">214</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">215</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">216</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">217</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">218</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">219</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">220</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">221</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">222</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">223</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">224</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">225</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">226</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">TreeNode</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, key, value, left<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, right<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, parent<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #666666">=</span> parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_left_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_right_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_root</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_leaf</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_any_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_children</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_value</span>(<span style="color: #008000">self</span>, key, value, left, right):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_successor</span>(<span style="color: #008000">self</span>):
        successor <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>find_min()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
                    successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>find_successor()
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">return</span> successor

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_min</span>(<span style="color: #008000">self</span>):
        current <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">while</span> current<span style="color: #666666">.</span>left_child:
            current <span style="color: #666666">=</span> current<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">return</span> current

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">splice_out</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_leaf():
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_any_child():
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
                <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
                <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                    <span style="color: #008000; font-weight: bold">yield</span> elem
            <span style="color: #008000; font-weight: bold">yield</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>key
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                    <span style="color: #008000; font-weight: bold">yield</span> elem


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BinarySearchTree</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #666666">0</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__len__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span><span style="color: #0000FF">__iter__</span>()

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">put</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> TreeNode(key, value)
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">+</span> <span style="color: #666666">1</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_put</span>(<span style="color: #008000">self</span>, key, value, current_node):
        <span style="color: #008000; font-weight: bold">if</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>left_child)
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> TreeNode(
                    key, value, parent<span style="color: #666666">=</span>current_node
                )
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>right_child:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>right_child)
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> TreeNode(
                    key, value, parent<span style="color: #666666">=</span>current_node
                )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__setitem__</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>put(key, value)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
            result <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
            <span style="color: #008000; font-weight: bold">if</span> result:
                <span style="color: #008000; font-weight: bold">return</span> result<span style="color: #666666">.</span>value
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_get</span>(<span style="color: #008000">self</span>, key, current_node):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> current_node:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
            <span style="color: #008000; font-weight: bold">return</span> current_node
        <span style="color: #008000; font-weight: bold">elif</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>left_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>right_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__getitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get(key)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__contains__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">bool</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root))

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">&gt;</span> <span style="color: #666666">1</span>:
            node_to_remove <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
            <span style="color: #008000; font-weight: bold">if</span> node_to_remove:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_delete(node_to_remove)
                <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">==</span> <span style="color: #666666">1</span> <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_delete</span>(<span style="color: #008000">self</span>, current_node):
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_leaf():  <span style="color: #3D7B7B; font-style: italic"># removing a leaf</span>
            <span style="color: #008000; font-weight: bold">if</span> current_node <span style="color: #666666">==</span> current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child:
                current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>has_children():  <span style="color: #3D7B7B; font-style: italic"># removing a node with two children</span>
            successor <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>find_successor()
            successor<span style="color: #666666">.</span>splice_out()
            current_node<span style="color: #666666">.</span>key <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>key
            current_node<span style="color: #666666">.</span>value <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>value
        <span style="color: #008000; font-weight: bold">else</span>:  <span style="color: #3D7B7B; font-style: italic"># removing a node with one child</span>
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
                    current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
                    current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    current_node<span style="color: #666666">.</span>replace_value(
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>key,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>value,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>left_child,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>right_child,
                    )
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
                    current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
                    current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    current_node<span style="color: #666666">.</span>replace_value(
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>key,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>value,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>left_child,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>right_child,
                    )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__delitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>delete(key)


my_tree <span style="color: #666666">=</span> BinarySearchTree()
my_tree[<span style="color: #BA2121">&quot;a&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;a&quot;</span>
my_tree[<span style="color: #BA2121">&quot;q&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;quick&quot;</span>
my_tree[<span style="color: #BA2121">&quot;b&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;brown&quot;</span>
my_tree[<span style="color: #BA2121">&quot;f&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;fox&quot;</span>
my_tree[<span style="color: #BA2121">&quot;j&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;jumps&quot;</span>
my_tree[<span style="color: #BA2121">&quot;o&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;over&quot;</span>
my_tree[<span style="color: #BA2121">&quot;t&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;the&quot;</span>
my_tree[<span style="color: #BA2121">&quot;l&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;lazy&quot;</span>
my_tree[<span style="color: #BA2121">&quot;d&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;dog&quot;</span>

<span style="color: #008000">print</span>(my_tree[<span style="color: #BA2121">&quot;q&quot;</span>])
<span style="color: #008000">print</span>(my_tree[<span style="color: #BA2121">&quot;l&quot;</span>])
<span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;There are </span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121"> items in this tree&quot;</span><span style="color: #666666">.</span>format(<span style="color: #008000">len</span>(my_tree)))
my_tree<span style="color: #666666">.</span>delete(<span style="color: #BA2121">&quot;a&quot;</span>)
<span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;There are </span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121"> items in this tree&quot;</span><span style="color: #666666">.</span>format(<span style="color: #008000">len</span>(my_tree)))

<span style="color: #008000; font-weight: bold">for</span> node <span style="color: #AA22FF; font-weight: bold">in</span> my_tree:
    <span style="color: #008000">print</span>(my_tree[node], end<span style="color: #666666">=</span><span style="color: #BA2121">&quot; &quot;</span>)
<span style="color: #008000">print</span>()
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>A binary search tree (BST) relies on the property that keys that are less than the parent are found in the left subtree, and keys that are greater than the parent are found in the right subtree. We will call this the <strong>BST property</strong>. As we implement the <code>Map</code> interface as described above, the BST property will guide our implementation. <code>Figure 1</code> illustrates this property of a binary search tree, showing the keys without any associated values. Notice that the property holds for each parent and child. All of the keys in the left subtree are less than the key in the root. All of the keys in the right subtree are greater than the root.</p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/simpleBST.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/simpleBST.png" /></a>
    <figcaption markdown="span">Figure 1: A Simple Binary Search Tree</figcaption>
</figure>  </p>
<p>Now that you know what a binary search tree is, we will look at how a binary search tree is constructed. The search tree in <code>Figure 1</code> represents the nodes that exist after we have inserted the following keys in the order shown: <span class="arithmatex">\(70, 31, 93, 94, 14, 23, 73\)</span>. Since 70 was the first key inserted into the tree, it is the root. Next, 31 is less than 70, so it becomes the left child of 70. Next, 93 is greater than 70, so it becomes the right child of 70. Now we have two levels of the tree filled, so the next key is going to be the left or right child of either 31 or 93. Since 94 is greater than 70 and 93, it becomes the right child of 93. Similarly 14 is less than 70 and 31, so it becomes the left child of 31. 23 is also less than 31, so it must be in the left subtree of 31. However, it is greater than 14, so it becomes the right child of 14.</p>
<p>To implement the binary search tree, we will use the nodes and references approach similar to the one we used to implement the linked list and the expression tree. However, because we must be able create and work with a binary search tree that is empty, our implementation will use two classes. The first class we will call <code>BinarySearchTree</code>, and the second class we will call <code>TreeNode</code>. The <code>BinarySearchTree</code> class has a reference to the <code>TreeNode</code> that is the root of the binary search tree. In most cases the external methods defined in the outer class simply check to see if the tree is empty. If there are nodes in the tree, the request is just passed on to a private method defined in the <code>BinarySearchTree</code> class that takes the root as a parameter. In the case where the tree is empty or we want to delete the key at the root of the tree, we must take special action. The code for the <code>BinarySearchTree</code> class constructor along with a few other miscellaneous methods is shown in <code>Listing 1</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 1</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BinarySearchTree</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #666666">0</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__len__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span><span style="color: #0000FF">__iter__</span>()
</code></pre></div>
<p>The <code>TreeNode</code> class provides many helper methods that make the work done in the <code>BinarySearchTree</code> class methods much easier. The constructor for a <code>TreeNode</code>, along with these helper methods, is shown in <code>Listing 2</code>. As you can see in the listing many of these helper methods help to classify a node according to its own position as a child (left or right) and the kind of children the node has. The <code>TreeNode</code> class will also explicitly keep track of the parent as an attribute of each node. You will see why this is important when we discuss the implementation for the <code>del</code> operator.</p>
<p>Another interesting aspect of the implementation of <code>TreeNode</code> in <code>Listing 2</code> is that we use Python’s optional parameters. Optional parameters make it easy for us to create a <code>TreeNode</code> under several different circumstances. Sometimes we will want to construct a new <code>TreeNode</code> that already has both a parent and a child (e.g. left) and in that case we can pass <code>parent</code> and <code>left_child</code> as parameters. At other times we will just create a <code>TreeNode</code> with the key-value pair, and we will not pass any parameters for <code>parent</code> or <code>child</code>. In this case, the default values of the optional parameters are used.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 2</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">TreeNode</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, key, value, left<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, right<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, parent<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #666666">=</span> parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_left_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_right_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_root</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_leaf</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_any_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_children</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_value</span>(<span style="color: #008000">self</span>, key, value, left, right):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
</code></pre></div>
<p>Now that we have the <code>BinarySearchTree</code> shell and the <code>TreeNode</code>, it is time to write the <code>put</code> method that will allow us to build our binary search tree. The <code>put</code> method is a method of the <code>BinarySearchTree</code> class. This method will check to see if the tree already has a root. If there is not a root, then <code>put</code> will create a new <code>TreeNode</code> and install it as the root of the tree. If a root node is already in place, then <code>put</code> calls the private recursive helper method <code>_put</code> to search the tree according to the following algorithm:</p>
<ul>
<li>Starting at the root of the tree, search the binary tree comparing the new key to the key in the current node. If the new key is less than the current node, search the left subtree. If the new key is greater than the current node, search the right subtree.</li>
<li>When there is no left or right child to search, we have found the position in the tree where the new node should be installed.</li>
<li>To add a node to the tree, create a new <code>TreeNode</code> object and insert the object at the point discovered in the previous step.</li>
</ul>
<p><code>Listing 3</code> shows the Python code for inserting a new node in the tree. The <code>_put</code> method is written recursively following the steps outlined above. Notice that when a new child is inserted into the tree, the <code>current_node</code> is passed to the new tree as the parent.</p>
<p>One important problem with our implementation of insertion is that duplicate keys are not handled properly. As our tree is implemented, a duplicate key will create a new node with the same key value in the right subtree of the node having the original key. The result of this is that the node with the new key will never be found during a search. A better way to handle the insertion of a duplicate key is for the value associated with the new key to replace the old value. We leave fixing this bug as an exercise for you.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 3</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">put</span>(<span style="color: #008000">self</span>, key, value):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> TreeNode(key, value)
    <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">+</span> <span style="color: #666666">1</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_put</span>(<span style="color: #008000">self</span>, key, value, current_node):
    <span style="color: #008000; font-weight: bold">if</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>left_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> TreeNode(key, value, parent<span style="color: #666666">=</span>current_node)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>right_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> TreeNode(key, value, parent<span style="color: #666666">=</span>current_node)
</code></pre></div>
<p>With the <code>put</code> method defined, we can easily overload the <code>[]</code> operator for assignment by having the <code>__setitem__</code> method call the <code>put</code> method (see <code>Listing 4</code>). This allows us to write Python statements like <code>my_zip_tree['Plymouth'] = 55446</code>, just like a Python dictionary.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 4</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__setitem__</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>put(key, value)
</code></pre></div>
<p><code>Figure 2</code> illustrates the process for inserting a new node into a binary search tree. The lightly shaded nodes indicate the nodes that were visited during the insertion process.</p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstput.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstput.png" /></a>
    <figcaption markdown="span">Figure 2: Inserting a Node with Key = 19</figcaption>
</figure>  </p>
<div class="admonition info">
<p class="admonition-title">Self Check</p>
<p>Which of the trees shows a correct binary search tree given that the keys were inserted in the following order 5, 30, 2, 40, 25, 4.</p>
<ul>
<li>answer_a: <a class="glightbox" href="../imgs/bintree_a.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_a.png"></a></li>
<li>answer_b: <a class="glightbox" href="../imgs/bintree_b.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_b.png"></a></li>
<li>answer_c: <a class="glightbox" href="../imgs/bintree_c.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="../imgs/bintree_c.png"></a></li>
</ul>
<p>correct: b</p>
<ul>
<li>feedback a: Remember, starting at the root keys less than the root must be in the left subtree, while keys greater than the root go in the right subtree.</li>
<li>feedback b: good job.</li>
<li>feedback c: This looks like a binary tree that satisfies the full tree property needed for a heap.</li>
</ul>
</div>
<p>Once the tree is constructed, the next task is to implement the retrieval of a value for a given key. The <code>get</code> method is even easier than the <code>put</code> method because it simply searches the tree recursively until it gets to a non-matching leaf node or finds a matching key. When a matching key is found, the value stored in the payload of the node is returned.</p>
<p><code>Listing 5</code> shows the code for <code>get</code> and <code>_get</code>. The search code in the <code>_get</code> method uses the same logic for choosing the left or right child as the <code>_put</code> method. Notice that the <code>_get</code> method returns a <code>TreeNode</code> to <code>get</code>, this allows <code>_get</code> to be used as a flexible helper method for other <code>BinarySearchTree</code> methods that may need to make use of other data from the <code>TreeNode</code> besides the payload.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 5</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
        result <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">if</span> result:
            <span style="color: #008000; font-weight: bold">return</span> result<span style="color: #666666">.</span>value
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_get</span>(<span style="color: #008000">self</span>, key, current_node):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> current_node:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
        <span style="color: #008000; font-weight: bold">return</span> current_node
    <span style="color: #008000; font-weight: bold">elif</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>left_child)
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>right_child)
</code></pre></div>
<p>By implementing the <code>__getitem__</code> method we can write a Python statement that looks just like we are accessing a dictionary, when in fact we are using a binary search tree, for example <code>z = my_zip_tree["Fargo"]</code>.  As you can see in <code>Listing 6</code>, all the <code>__getitem__</code> method does is call <code>get</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 6</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__getitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get(key)
</code></pre></div>
<p>Using <code>get</code>, we can implement the <code>in</code> operation by writing a <code>__contains__</code> method for the <code>BinarySearchTree</code>. The <code>__contains__</code> method will simply call <code>get</code> and return <code>True</code> if <code>get</code> returns a value, or <code>False</code> if it returns <code>None</code>. The code for <code>__contains__</code> is shown in <code>Listing 7</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 7</span><pre style="line-height: 125%;"><span></span><code>    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__contains__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">bool</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root))
</code></pre></div>
<p>Recall that <code>__contains__</code> overloads the <code>in</code> operator and allows us to write statements such as <code>"Northfield" in my_zip_tree</code>.</p>
<p>Finally, we turn our attention to the most challenging operation on the binary search tree, the deletion of a key (see <code>Listing 8</code>). The first task is to find the node to delete by searching the tree. If the tree has more than one node we search using the <code>_get</code> method to find the <code>TreeNode</code> that needs to be removed. If the tree only has a single node, that means we are removing the root of the tree, but we still must check to make sure the key of the root matches the key that is to be deleted. In either case if the key is not found the <code>del</code> operator raises an error.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 8</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">&gt;</span> <span style="color: #666666">1</span>:
        node_to_remove <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">if</span> node_to_remove:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_delete(node_to_remove)
            <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">==</span> <span style="color: #666666">1</span> <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
</code></pre></div>
<p>Once we’ve found the node containing the key we want to delete, there are three cases that we must consider:</p>
<ol>
<li>The node to be deleted has no children (see <code>Figure 3</code>).</li>
<li>The node to be deleted has only one child (see <code>Figure 4</code>).</li>
<li>The node to be deleted has two children (see <code>Figure 5</code>).</li>
</ol>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel1.png" /></a>
    <figcaption markdown="span">Figure 3: Deleting Node 16, a Node without Children</figcaption>
</figure>  </p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel2.png" /></a>
    <figcaption markdown="span">Figure 4: Deleting Node 25, a Node That Has a Single Child</figcaption>
</figure>  </p>
<p><figure markdown="span">
    <a class="glightbox" href="../imgs/bstdel3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Image title" src="../imgs/bstdel3.png" /></a>
    <figcaption markdown="span">Figure 5: Deleting Node 5, a Node with Two Children</figcaption>
</figure>  </p>
<p>The first case is straightforward. If the current node has no children, all we need to do is delete the node and remove the reference to this node in the parent. The code for this case is shown in <code>Listing 9</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 9</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_leaf():
    <span style="color: #008000; font-weight: bold">if</span> current_node <span style="color: #666666">==</span> current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child:
        current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
</code></pre></div>
<p>The second case is only slightly more complicated. If a node has only a single child, then we can simply promote the child to take the place of its parent. The code for this case is shown in <code>Listing 10</code>. As you look at this code, you will see that there are six cases to consider. Since the cases are symmetric with respect to either having a left or right child, we will just discuss the case where the current node has a left child. The decision proceeds as follows:</p>
<ol>
<li>If the current node is a left child, then we only need to update the parent reference of the left child to point to the parent of the current node, and then update the left child reference of the parent to point to the current node’s left child.</li>
<li>
<p>If the current node is a right child, then we only need to update the parent reference of the left child to point to the parent of the current node, and then update the right child reference of the parent to point to the current node’s left child.</p>
</li>
<li>
<p>If the current node has no parent, it must be the root. In this case we will just replace the <code>key</code>, <code>value</code>, <code>left_child</code>, and <code>right_child</code> data by calling the <code>replace_value</code> method on the root</p>
</li>
</ol>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 10</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">else</span>:  <span style="color: #3D7B7B; font-style: italic"># removing a node with one child</span>
    <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>get_left_child():
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
            current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
            current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>replace_value(
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>key,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>value,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>left_child,
                current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>right_child,
            )
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
            current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
            current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
            current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
        <span style="color: #008000; font-weight: bold">else</span>:
            current_node<span style="color: #666666">.</span>replace_value(
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>key,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>value,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>left_child,
                current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>right_child,
            )
</code></pre></div>
<p>The third case is the most difficult case to handle. If a node has two children, then it is unlikely that we can simply promote one of them to take the node’s place. We can, however, search the tree for a node that can be used to replace the one scheduled for deletion. What we need is a node that will preserve the binary search tree relationships for both of the existing left and right subtrees. The node that will do this is the node that has the next-largest key in the tree. We call this node the <strong>successor</strong>, and we will look at a way to find the successor shortly. The successor is guaranteed to have no more than one child, so we know how to remove it using the two cases for deletion that we have already implemented. Once the successor has been removed, we simply put it in the tree in place of the node to be deleted. The code  to handle the third case is shown in <code>Listing 11</code>.</p>
<p>In <code>Listing 11</code> we make use of the helper methods <code>find_successor</code> and <code>splice_out</code> to find and remove the successor. The reason we use <code>splice_out</code> is that it goes directly to the node we want to splice out and makes the right changes. We could call <code>delete</code> recursively, but then we would waste time searching again for the key node.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 11</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>has_children():  <span style="color: #3D7B7B; font-style: italic"># removing a node with two children</span>
    successor <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>find_successor()
    successor<span style="color: #666666">.</span>splice_out()
    current_node<span style="color: #666666">.</span>key <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>key
    current_node<span style="color: #666666">.</span>value <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>value
</code></pre></div>
<p>The code to find the successor is shown below (see <code>Listing 12</code>) and as you can see is a method of the <code>TreeNode</code> class. This code makes use of the same properties of binary search trees that cause an inorder traversal to print out the nodes in the tree from smallest to largest. There are three cases to consider when looking for the successor:</p>
<ol>
<li>If the node has a right child, then the successor is the smallest key in the right subtree.</li>
<li>If the node has no right child and is the left child of its parent, then the parent is the successor.</li>
<li>If the node is the right child of its parent, and itself has no right child, then the successor to this node is the successor of its parent, excluding this node.</li>
</ol>
<p>The first condition is the only one that matters for us when deleting a node from a binary search tree. However, the <code>find_successor</code> method has other uses that we will explore in the exercises at the end of this chapter.</p>
<p>The <code>find_min</code> method is called to find the minimum key in a subtree. You should convince yourself that the minimum value key in any binary search tree is the leftmost child of the tree. Therefore the <code>find_min</code> method simply follows the <code>left_child</code> references in each node of the subtree until it reaches a node that does not have a left child.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 12</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_successor</span>(<span style="color: #008000">self</span>):
    successor <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
        successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>find_min()
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
                successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>find_successor()
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span>
    <span style="color: #008000; font-weight: bold">return</span> successor

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_min</span>(<span style="color: #008000">self</span>):
    current <span style="color: #666666">=</span> <span style="color: #008000">self</span>
    <span style="color: #008000; font-weight: bold">while</span> current<span style="color: #666666">.</span>left_child:
        current <span style="color: #666666">=</span> current<span style="color: #666666">.</span>left_child
    <span style="color: #008000; font-weight: bold">return</span> current

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">splice_out</span>(<span style="color: #008000">self</span>):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_leaf():
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
            <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_any_child():
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
</code></pre></div>
<p>We can implement the <code>del</code> operator by writing a <code>__delete__</code> method for the <code>BinarySearchTree</code> as shown in <code>Listing 13</code>. It is a wrapper method that allows us to remove a key from the map by writing <code>del my_zip_tree["NYC"]</code>.</p>
<div class="language-python highlight" style="background: #f8f8f8"><span class="filename">Listing 13</span><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__delitem__</span>(<span style="color: #008000">self</span>, key):
    <span style="color: #008000">self</span><span style="color: #666666">.</span>delete(key)
</code></pre></div>
<p>We need to look at one last interface method for the binary search tree. Suppose that we would like to simply iterate over all the keys in the tree in order. This is definitely something we have done with dictionaries, so why not trees? You already know how to traverse a binary tree in order, using the <code>inorder</code> traversal algorithm. However, writing an iterator requires a bit more work since an iterator should return only one node each time the iterator is called.</p>
<p>Python provides us with a very powerful function to use when creating an iterator. The function is called <code>yield</code>. <code>yield</code> is similar to <code>return</code> in that it returns a value to the caller. However, <code>yield</code> also takes the additional step of freezing the state of the function so that the next time the function is called it continues executing from the exact point it left off earlier. Functions that create objects that can be iterated are called <em>generator functions</em>.</p>
<p>The code for an <code>inorder</code> iterator of a binary tree is shown in the next listing. Look at this code carefully; at first glance you might think that the code is not recursive. However, remember that <code>__iter__</code> overrides the <code>for ... in</code> operation for iteration, so it really is recursive! Because it is recursive over <code>TreeNode</code> instances, the <code>__iter__</code> method is defined in the <code>TreeNode</code> class.</p>
<div class="language-python highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span>:
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">yield</span> elem
        <span style="color: #008000; font-weight: bold">yield</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>key
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                <span style="color: #008000; font-weight: bold">yield</span> elem
</code></pre></div>
<p>At this point you may want to download the entire file containing the full version of the <code>BinarySearchTree</code> and <code>TreeNode</code> classes.</p>
<div class="language-python highlight" style="background: #f8f8f8"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Activity: 6.14.2 ActiveCode</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 60</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 61</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 62</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 63</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 64</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 65</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 66</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 67</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 68</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 69</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 70</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 71</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 82</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 83</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 84</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 85</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 86</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 87</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 88</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 89</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 90</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 91</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 92</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 93</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 94</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 95</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 96</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 97</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 98</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 99</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">100</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">101</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">102</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">103</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">104</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">105</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">106</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">107</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">108</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">109</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">110</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">111</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">112</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">113</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">114</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">115</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">116</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">117</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">118</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">119</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">120</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">121</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">122</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">123</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">124</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">125</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">126</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">127</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">128</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">129</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">130</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">131</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">132</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">133</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">134</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">135</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">136</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">137</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">138</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">139</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">140</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">141</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">142</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">143</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">144</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">145</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">146</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">147</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">148</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">149</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">150</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">151</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">152</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">153</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">154</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">155</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">156</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">157</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">158</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">159</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">160</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">161</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">162</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">163</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">164</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">165</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">166</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">167</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">168</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">169</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">170</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">171</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">172</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">173</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">174</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">175</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">176</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">177</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">178</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">179</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">180</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">181</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">182</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">183</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">184</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">185</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">186</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">187</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">188</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">189</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">190</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">191</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">192</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">193</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">194</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">195</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">196</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">197</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">198</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">199</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">200</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">201</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">202</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">203</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">204</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">205</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">206</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">207</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">208</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">209</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">210</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">211</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">212</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">213</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">214</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">215</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">216</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">217</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">218</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">219</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">220</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">221</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">222</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">223</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">224</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">225</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">226</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">TreeNode</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, key, value, left<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, right<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>, parent<span style="color: #666666">=</span><span style="color: #008000; font-weight: bold">None</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #666666">=</span> parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_left_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_right_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_root</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">is_leaf</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #AA22FF; font-weight: bold">not</span> (<span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_any_child</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">or</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">has_children</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">replace_value</span>(<span style="color: #008000">self</span>, key, value, left, right):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>key <span style="color: #666666">=</span> key
        <span style="color: #008000">self</span><span style="color: #666666">.</span>value <span style="color: #666666">=</span> value
        <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> left
        <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> right
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_successor</span>(<span style="color: #008000">self</span>):
        successor <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
            successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>find_min()
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
                    successor <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>find_successor()
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">return</span> successor

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">find_min</span>(<span style="color: #008000">self</span>):
        current <span style="color: #666666">=</span> <span style="color: #008000">self</span>
        <span style="color: #008000; font-weight: bold">while</span> current<span style="color: #666666">.</span>left_child:
            current <span style="color: #666666">=</span> current<span style="color: #666666">.</span>left_child
        <span style="color: #008000; font-weight: bold">return</span> current

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">splice_out</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_leaf():
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>has_any_child():
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child
                <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>is_left_child():
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    <span style="color: #008000">self</span><span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child
                <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>parent

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span>:
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>left_child:
                    <span style="color: #008000; font-weight: bold">yield</span> elem
            <span style="color: #008000; font-weight: bold">yield</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>key
            <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                <span style="color: #008000; font-weight: bold">for</span> elem <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>right_child:
                    <span style="color: #008000; font-weight: bold">yield</span> elem


<span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">BinarySearchTree</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #666666">0</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__len__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__iter__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span><span style="color: #0000FF">__iter__</span>()

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">put</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> TreeNode(key, value)
        <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">+</span> <span style="color: #666666">1</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_put</span>(<span style="color: #008000">self</span>, key, value, current_node):
        <span style="color: #008000; font-weight: bold">if</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>left_child)
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> TreeNode(
                    key, value, parent<span style="color: #666666">=</span>current_node
                )
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>right_child:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_put(key, value, current_node<span style="color: #666666">.</span>right_child)
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> TreeNode(
                    key, value, parent<span style="color: #666666">=</span>current_node
                )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__setitem__</span>(<span style="color: #008000">self</span>, key, value):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>put(key, value)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root:
            result <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
            <span style="color: #008000; font-weight: bold">if</span> result:
                <span style="color: #008000; font-weight: bold">return</span> result<span style="color: #666666">.</span>value
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_get</span>(<span style="color: #008000">self</span>, key, current_node):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #AA22FF; font-weight: bold">not</span> current_node:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
            <span style="color: #008000; font-weight: bold">return</span> current_node
        <span style="color: #008000; font-weight: bold">elif</span> key <span style="color: #666666">&lt;</span> current_node<span style="color: #666666">.</span>key:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>left_child)
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, current_node<span style="color: #666666">.</span>right_child)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__getitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>get(key)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__contains__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">bool</span>(<span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root))

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">delete</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">&gt;</span> <span style="color: #666666">1</span>:
            node_to_remove <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_get(key, <span style="color: #008000">self</span><span style="color: #666666">.</span>root)
            <span style="color: #008000; font-weight: bold">if</span> node_to_remove:
                <span style="color: #008000">self</span><span style="color: #666666">.</span>_delete(node_to_remove)
                <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)
        <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">==</span> <span style="color: #666666">1</span> <span style="color: #AA22FF; font-weight: bold">and</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>root<span style="color: #666666">.</span>key <span style="color: #666666">==</span> key:
            <span style="color: #008000">self</span><span style="color: #666666">.</span>root <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>size <span style="color: #666666">-</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #008000; font-weight: bold">raise</span> <span style="color: #CB3F38; font-weight: bold">KeyError</span>(<span style="color: #BA2121">&quot;Error, key not in tree&quot;</span>)

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">_delete</span>(<span style="color: #008000">self</span>, current_node):
        <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_leaf():  <span style="color: #3D7B7B; font-style: italic"># removing a leaf</span>
            <span style="color: #008000; font-weight: bold">if</span> current_node <span style="color: #666666">==</span> current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child:
                current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
            <span style="color: #008000; font-weight: bold">else</span>:
                current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">None</span>
        <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>has_children():  <span style="color: #3D7B7B; font-style: italic"># removing a node with two children</span>
            successor <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>find_successor()
            successor<span style="color: #666666">.</span>splice_out()
            current_node<span style="color: #666666">.</span>key <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>key
            current_node<span style="color: #666666">.</span>value <span style="color: #666666">=</span> successor<span style="color: #666666">.</span>value
        <span style="color: #008000; font-weight: bold">else</span>:  <span style="color: #3D7B7B; font-style: italic"># removing a node with one child</span>
            <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>left_child:
                <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
                    current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
                    current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>left_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    current_node<span style="color: #666666">.</span>replace_value(
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>key,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>value,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>left_child,
                        current_node<span style="color: #666666">.</span>left_child<span style="color: #666666">.</span>right_child,
                    )
            <span style="color: #008000; font-weight: bold">else</span>:
                <span style="color: #008000; font-weight: bold">if</span> current_node<span style="color: #666666">.</span>is_left_child():
                    current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>left_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">elif</span> current_node<span style="color: #666666">.</span>is_right_child():
                    current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>parent <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>parent
                    current_node<span style="color: #666666">.</span>parent<span style="color: #666666">.</span>right_child <span style="color: #666666">=</span> current_node<span style="color: #666666">.</span>right_child
                <span style="color: #008000; font-weight: bold">else</span>:
                    current_node<span style="color: #666666">.</span>replace_value(
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>key,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>value,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>left_child,
                        current_node<span style="color: #666666">.</span>right_child<span style="color: #666666">.</span>right_child,
                    )

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__delitem__</span>(<span style="color: #008000">self</span>, key):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>delete(key)


my_tree <span style="color: #666666">=</span> BinarySearchTree()
my_tree[<span style="color: #BA2121">&quot;a&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;a&quot;</span>
my_tree[<span style="color: #BA2121">&quot;q&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;quick&quot;</span>
my_tree[<span style="color: #BA2121">&quot;b&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;brown&quot;</span>
my_tree[<span style="color: #BA2121">&quot;f&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;fox&quot;</span>
my_tree[<span style="color: #BA2121">&quot;j&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;jumps&quot;</span>
my_tree[<span style="color: #BA2121">&quot;o&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;over&quot;</span>
my_tree[<span style="color: #BA2121">&quot;t&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;the&quot;</span>
my_tree[<span style="color: #BA2121">&quot;l&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;lazy&quot;</span>
my_tree[<span style="color: #BA2121">&quot;d&quot;</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;dog&quot;</span>

<span style="color: #008000">print</span>(my_tree[<span style="color: #BA2121">&quot;q&quot;</span>])
<span style="color: #008000">print</span>(my_tree[<span style="color: #BA2121">&quot;l&quot;</span>])
<span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;There are </span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121"> items in this tree&quot;</span><span style="color: #666666">.</span>format(<span style="color: #008000">len</span>(my_tree)))
my_tree<span style="color: #666666">.</span>delete(<span style="color: #BA2121">&quot;a&quot;</span>)
<span style="color: #008000">print</span>(<span style="color: #BA2121">&quot;There are </span><span style="color: #A45A77; font-weight: bold">{}</span><span style="color: #BA2121"> items in this tree&quot;</span><span style="color: #666666">.</span>format(<span style="color: #008000">len</span>(my_tree)))

<span style="color: #008000; font-weight: bold">for</span> node <span style="color: #AA22FF; font-weight: bold">in</span> my_tree:
    <span style="color: #008000">print</span>(my_tree[node], end<span style="color: #666666">=</span><span style="color: #BA2121">&quot; &quot;</span>)
<span style="color: #008000">print</span>()
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月11日</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月9日</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "content.tabs.link", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.prune", "navigation.instant"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>